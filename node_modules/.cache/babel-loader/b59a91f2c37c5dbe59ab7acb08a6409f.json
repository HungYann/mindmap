{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/liuhongyang/Documents/GitHub/repositories/mindmap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\ndisplay: flex;\\nalign-items: center;\\nwidth: max-content; /* max-content \\u624D\\u80FD\\u4FDD\\u8BC1\\u6B63\\u786E\\u8BFB\\u53D6\\u5E03\\u5C40 */\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useEffect,useRef}from'react';import{css}from'emotion';import{ROOT_PARENT}from'../../statics/refer';import Node from'../Node';import SubNode from'../SubNode';var RootNode=function RootNode(_ref){var layer=_ref.layer,node=_ref.node,node_refs=_ref.node_refs;var root_node=useRef();var total=node.children.length,half=total>3?Math.trunc(total/2):total;// 载入时使根节点居中。暂时没发现除了多包一层 div 之外更好的解决方法\nuseEffect(function(){root_node.current.scrollIntoView({block:'center',inline:'center'});},[]);return/*#__PURE__*/React.createElement(\"div\",{className:wrapper},/*#__PURE__*/React.createElement(\"div\",null,node.showChildren&&node.children.slice(half).map(function(sub_node){return/*#__PURE__*/React.createElement(SubNode,{key:sub_node.id,layer:layer+1,node:sub_node,node_refs:node_refs,parent:node,on_left:true});})),/*#__PURE__*/React.createElement(\"div\",{ref:root_node},/*#__PURE__*/React.createElement(Node,{layer:0,node:node,node_refs:node_refs,parent:ROOT_PARENT})),/*#__PURE__*/React.createElement(\"div\",null,node.showChildren&&node.children.slice(0,half).map(function(sub_node){return/*#__PURE__*/React.createElement(SubNode,{key:sub_node.id,layer:layer+1,node:sub_node,node_refs:node_refs,parent:node,on_left:false});})));};export default RootNode;// CSS\nvar wrapper=css(_templateObject());","map":{"version":3,"sources":["/Users/liuhongyang/Documents/GitHub/repositories/mindmap/src/components/RootNode/index.js"],"names":["React","useEffect","useRef","css","ROOT_PARENT","Node","SubNode","RootNode","layer","node","node_refs","root_node","total","children","length","half","Math","trunc","current","scrollIntoView","block","inline","wrapper","showChildren","slice","map","sub_node","id"],"mappings":"kdAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,MAA1B,KAAuC,OAAvC,CACA,OAAQC,GAAR,KAAkB,SAAlB,CACA,OAAQC,WAAR,KAA0B,qBAA1B,CACA,MAAOC,CAAAA,IAAP,KAAiB,SAAjB,CACA,MAAOC,CAAAA,OAAP,KAAoB,YAApB,CAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,MAA8B,IAA5BC,CAAAA,KAA4B,MAA5BA,KAA4B,CAArBC,IAAqB,MAArBA,IAAqB,CAAfC,SAAe,MAAfA,SAAe,CAC3C,GAAMC,CAAAA,SAAS,CAAGT,MAAM,EAAxB,CAEA,GAAMU,CAAAA,KAAK,CAAGH,IAAI,CAACI,QAAL,CAAcC,MAA5B,CACIC,IAAI,CAAGH,KAAK,CAAG,CAAR,CAAYI,IAAI,CAACC,KAAL,CAAWL,KAAK,CAAG,CAAnB,CAAZ,CAAoCA,KAD/C,CAGA;AACAX,SAAS,CAAC,UAAM,CACZU,SAAS,CAACO,OAAV,CAAkBC,cAAlB,CAAiC,CAACC,KAAK,CAAE,QAAR,CAAkBC,MAAM,CAAE,QAA1B,CAAjC,EACH,CAFQ,CAEN,EAFM,CAAT,CAIA,mBAAQ,2BAAK,SAAS,CAAEC,OAAhB,eACJ,+BACKb,IAAI,CAACc,YAAL,EAAqBd,IAAI,CAACI,QAAL,CAAcW,KAAd,CAAoBT,IAApB,EAA0BU,GAA1B,CAA8B,SAAAC,QAAQ,qBAAI,oBAAC,OAAD,EAC5D,GAAG,CAAEA,QAAQ,CAACC,EAD8C,CAE5D,KAAK,CAAEnB,KAAK,CAAG,CAF6C,CAG5D,IAAI,CAAEkB,QAHsD,CAI5D,SAAS,CAAEhB,SAJiD,CAK5D,MAAM,CAAED,IALoD,CAK9C,OAAO,CAAE,IALqC,EAAJ,EAAtC,CAD1B,CADI,cASJ,2BAAK,GAAG,CAAEE,SAAV,eACI,oBAAC,IAAD,EAAM,KAAK,CAAE,CAAb,CAAgB,IAAI,CAAEF,IAAtB,CAA4B,SAAS,CAAEC,SAAvC,CAAkD,MAAM,CAAEN,WAA1D,EADJ,CATI,cAYJ,+BACKK,IAAI,CAACc,YAAL,EAAqBd,IAAI,CAACI,QAAL,CAAcW,KAAd,CAAoB,CAApB,CAAuBT,IAAvB,EAA6BU,GAA7B,CAAiC,SAAAC,QAAQ,qBAAI,oBAAC,OAAD,EAC/D,GAAG,CAAEA,QAAQ,CAACC,EADiD,CAE/D,KAAK,CAAEnB,KAAK,CAAG,CAFgD,CAG/D,IAAI,CAAEkB,QAHyD,CAI/D,SAAS,CAAEhB,SAJoD,CAK/D,MAAM,CAAED,IALuD,CAM/D,OAAO,CAAE,KANsD,EAAJ,EAAzC,CAD1B,CAZI,CAAR,CAsBH,CAjCD,CAmCA,cAAeF,CAAAA,QAAf,CAEA;AACA,GAAMe,CAAAA,OAAO,CAAGnB,GAAH,mBAAb","sourcesContent":["import React, {useEffect, useRef} from 'react';\nimport {css} from 'emotion';\nimport {ROOT_PARENT} from '../../statics/refer';\nimport Node from '../Node';\nimport SubNode from '../SubNode';\n\nconst RootNode = ({layer, node, node_refs}) => {\n    const root_node = useRef();\n\n    const total = node.children.length,\n        half = total > 3 ? Math.trunc(total / 2) : total;\n\n    // 载入时使根节点居中。暂时没发现除了多包一层 div 之外更好的解决方法\n    useEffect(() => {\n        root_node.current.scrollIntoView({block: 'center', inline: 'center'});\n    }, []);\n\n    return (<div className={wrapper}>\n        <div>\n            {node.showChildren && node.children.slice(half).map(sub_node => <SubNode\n                key={sub_node.id}\n                layer={layer + 1}\n                node={sub_node}\n                node_refs={node_refs}\n                parent={node} on_left={true} />)}\n        </div>\n        <div ref={root_node}>\n            <Node layer={0} node={node} node_refs={node_refs} parent={ROOT_PARENT} />\n        </div>\n        <div>\n            {node.showChildren && node.children.slice(0, half).map(sub_node => <SubNode\n                key={sub_node.id}\n                layer={layer + 1}\n                node={sub_node}\n                node_refs={node_refs}\n                parent={node}\n                on_left={false} />)}\n        </div>\n    </div>);\n};\n\nexport default RootNode;\n\n// CSS\nconst wrapper = css`\ndisplay: flex;\nalign-items: center;\nwidth: max-content; /* max-content 才能保证正确读取布局 */\n`;"]},"metadata":{},"sourceType":"module"}