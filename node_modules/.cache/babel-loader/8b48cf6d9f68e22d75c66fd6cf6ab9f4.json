{"ast":null,"code":"import _taggedTemplateLiteral from\"/Users/liuhongyang/Documents/GitHub/repositories/mindmap/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject(){var data=_taggedTemplateLiteral([\"\\npadding: 0;\\nlist-style: none;\\n\\nli {\\npadding: 5px 0 5px 5px;\\nborder-left: 3px solid transparent;\\nborder-bottom: 1px solid #dddddd;\\nline-height: 30px;\\ncursor: pointer;\\n}\\n\\nli:last-of-type {\\nborder-bottom: none;\\n}\\n\\nli:hover {\\nborder-left: 3px solid var(\",\");\\n}\\n\\nli i {\\nmargin-right: 10px;\\nfont-size: 30px;\\n}\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useContext}from'react';import{css}from'emotion';import{context}from'../../../context';import useMindmap from'../../../customHooks/useMindmap';import*as refer from'../../../statics/refer';import html2canvas from'html2canvas';import{downloadFile}from'../../../methods/assistFunctions';import mindmapExporter from'../../../methods/mindmapExporter';import{Highlight,ButtonSet}from'../common/styledComponents';var Export=function Export(_ref){var handleClosePopup=_ref.handleClosePopup;var _useContext=useContext(context),mindmap=_useContext.mindmap.state,title=_useContext.global.state.title;var _useMindmap=useMindmap(),clearNodeStatus=_useMindmap.clearNodeStatus;var handleExportPNG=function handleExportPNG(){clearNodeStatus();// 防止选中状态时的工具条等也被导出到图像\nhtml2canvas(document.getElementById(refer.MINDMAP_ID)).then(function(canvas){var url=canvas.toDataURL('image/png');downloadFile(url,\"\".concat(title,\".png\"));});};var handleExportText=function handleExportText(format){var data=mindmapExporter(mindmap,format);var url=\"data:text/plain,\".concat(encodeURIComponent(data));downloadFile(url,\"\".concat(title,\".\").concat(format.toLowerCase()));};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Highlight,null,\"\\u8BF7\\u9009\\u62E9\\u5BFC\\u51FA\\u683C\\u5F0F\\uFF1A\"),/*#__PURE__*/React.createElement(\"ul\",{className:list_wrapper},/*#__PURE__*/React.createElement(\"li\",{onClick:handleExportPNG},/*#__PURE__*/React.createElement(\"i\",{className:'zwicon-file-image'}),\"PNG \\u56FE\\u7247\\uFF08.png\\uFF09\"),/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){handleExportText('KM');}},/*#__PURE__*/React.createElement(\"i\",{className:'zwicon-file-pdf'}),\"\\u767E\\u5EA6\\u8111\\u56FE\\uFF08.km\\uFF09\"),/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){handleExportText('MD');}},/*#__PURE__*/React.createElement(\"i\",{className:'zwicon-file-table'}),\"Markdown\\uFF08.md\\uFF09\"),/*#__PURE__*/React.createElement(\"li\",{onClick:function onClick(){handleExportText('TXT');}},/*#__PURE__*/React.createElement(\"i\",{className:'zwicon-file-font'}),\"\\u6587\\u672C\\u6587\\u4EF6\\uFF08.txt\\uFF09\")),/*#__PURE__*/React.createElement(ButtonSet,null,/*#__PURE__*/React.createElement(\"button\",{onClick:handleClosePopup},\"\\u5B8C\\u6210\")));};export default Export;// CSS\nvar list_wrapper=css(_templateObject(),refer.THEME_EX);","map":{"version":3,"sources":["/Users/liuhongyang/Documents/GitHub/repositories/mindmap/src/components/Popup/subComponents/Export.js"],"names":["React","useContext","css","context","useMindmap","refer","html2canvas","downloadFile","mindmapExporter","Highlight","ButtonSet","Export","handleClosePopup","mindmap","state","title","global","clearNodeStatus","handleExportPNG","document","getElementById","MINDMAP_ID","then","canvas","url","toDataURL","handleExportText","format","data","encodeURIComponent","toLowerCase","list_wrapper","THEME_EX"],"mappings":"+oBAAA,MAAOA,CAAAA,KAAP,EAAeC,UAAf,KAAgC,OAAhC,CACA,OAAQC,GAAR,KAAkB,SAAlB,CACA,OAAQC,OAAR,KAAsB,kBAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,iCAAvB,CACA,MAAO,GAAKC,CAAAA,KAAZ,KAAuB,wBAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,aAAxB,CACA,OAAQC,YAAR,KAA2B,kCAA3B,CACA,MAAOC,CAAAA,eAAP,KAA4B,kCAA5B,CACA,OAAQC,SAAR,CAAmBC,SAAnB,KAAmC,4BAAnC,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,MAAwB,IAAtBC,CAAAA,gBAAsB,MAAtBA,gBAAsB,iBAC2BX,UAAU,CAACE,OAAD,CADrC,CACXU,OADW,aAC5BA,OAD4B,CAClBC,KADkB,CACgBC,KADhB,aACDC,MADC,CACQF,KADR,CACgBC,KADhB,iBAETX,UAAU,EAFD,CAE5Ba,eAF4B,aAE5BA,eAF4B,CAInC,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC1BD,eAAe,GAAI;AACnBX,WAAW,CAACa,QAAQ,CAACC,cAAT,CAAwBf,KAAK,CAACgB,UAA9B,CAAD,CAAX,CAAuDC,IAAvD,CAA4D,SAAAC,MAAM,CAAI,CAClE,GAAIC,CAAAA,GAAG,CAAGD,MAAM,CAACE,SAAP,CAAiB,WAAjB,CAAV,CACAlB,YAAY,CAACiB,GAAD,WAAST,KAAT,SAAZ,CACH,CAHD,EAIH,CAND,CAQA,GAAMW,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAAAC,MAAM,CAAI,CAC/B,GAAMC,CAAAA,IAAI,CAAGpB,eAAe,CAACK,OAAD,CAAUc,MAAV,CAA5B,CACA,GAAIH,CAAAA,GAAG,2BAAsBK,kBAAkB,CAACD,IAAD,CAAxC,CAAP,CACArB,YAAY,CAACiB,GAAD,WAAST,KAAT,aAAkBY,MAAM,CAACG,WAAP,EAAlB,EAAZ,CACH,CAJD,CAMA,mBAAQ,4CACJ,oBAAC,SAAD,yDADI,cAEJ,0BAAI,SAAS,CAAEC,YAAf,eACI,0BAAI,OAAO,CAAEb,eAAb,eAA8B,yBAAG,SAAS,CAAE,mBAAd,EAA9B,oCADJ,cAEI,0BAAI,OAAO,CAAE,kBAAM,CAAEQ,gBAAgB,CAAC,IAAD,CAAhB,CAAyB,CAA9C,eAAgD,yBAAG,SAAS,CAAE,iBAAd,EAAhD,2CAFJ,cAGI,0BAAI,OAAO,CAAE,kBAAM,CAAEA,gBAAgB,CAAC,IAAD,CAAhB,CAAyB,CAA9C,eAAgD,yBAAG,SAAS,CAAE,mBAAd,EAAhD,2BAHJ,cAII,0BAAI,OAAO,CAAE,kBAAM,CAAEA,gBAAgB,CAAC,KAAD,CAAhB,CAA0B,CAA/C,eAAiD,yBAAG,SAAS,CAAE,kBAAd,EAAjD,4CAJJ,CAFI,cAQJ,oBAAC,SAAD,mBACI,8BAAQ,OAAO,CAAEd,gBAAjB,iBADJ,CARI,CAAR,CAYH,CA9BD,CAgCA,cAAeD,CAAAA,MAAf,CAEA;AACA,GAAMoB,CAAAA,YAAY,CAAG7B,GAAH,mBAiBWG,KAAK,CAAC2B,QAjBjB,CAAlB","sourcesContent":["import React, {useContext} from 'react';\nimport {css} from 'emotion';\nimport {context} from '../../../context';\nimport useMindmap from '../../../customHooks/useMindmap';\nimport * as refer from '../../../statics/refer';\nimport html2canvas from 'html2canvas';\nimport {downloadFile} from '../../../methods/assistFunctions';\nimport mindmapExporter from '../../../methods/mindmapExporter';\nimport {Highlight, ButtonSet} from '../common/styledComponents';\n\nconst Export = ({handleClosePopup}) => {\n    const {mindmap: {state: mindmap}, global: {state: {title}}} = useContext(context);\n    const {clearNodeStatus} = useMindmap();\n\n    const handleExportPNG = () => {\n        clearNodeStatus(); // 防止选中状态时的工具条等也被导出到图像\n        html2canvas(document.getElementById(refer.MINDMAP_ID)).then(canvas => {\n            let url = canvas.toDataURL('image/png');\n            downloadFile(url, `${title}.png`);\n        });\n    };\n\n    const handleExportText = format => {\n        const data = mindmapExporter(mindmap, format);\n        let url = `data:text/plain,${encodeURIComponent(data)}`;\n        downloadFile(url, `${title}.${format.toLowerCase()}`);\n    };\n\n    return (<div>\n        <Highlight>请选择导出格式：</Highlight>\n        <ul className={list_wrapper}>\n            <li onClick={handleExportPNG}><i className={'zwicon-file-image'} />PNG 图片（.png）</li>\n            <li onClick={() => { handleExportText('KM'); }}><i className={'zwicon-file-pdf'} />百度脑图（.km）</li>\n            <li onClick={() => { handleExportText('MD'); }}><i className={'zwicon-file-table'} />Markdown（.md）</li>\n            <li onClick={() => { handleExportText('TXT'); }}><i className={'zwicon-file-font'} />文本文件（.txt）</li>\n        </ul>\n        <ButtonSet>\n            <button onClick={handleClosePopup}>完成</button>\n        </ButtonSet>\n    </div>);\n};\n\nexport default Export;\n\n// CSS\nconst list_wrapper = css`\npadding: 0;\nlist-style: none;\n\nli {\npadding: 5px 0 5px 5px;\nborder-left: 3px solid transparent;\nborder-bottom: 1px solid #dddddd;\nline-height: 30px;\ncursor: pointer;\n}\n\nli:last-of-type {\nborder-bottom: none;\n}\n\nli:hover {\nborder-left: 3px solid var(${refer.THEME_EX});\n}\n\nli i {\nmargin-right: 10px;\nfont-size: 30px;\n}\n`;"]},"metadata":{},"sourceType":"module"}