{"ast":null,"code":"const mousemoveInfo = {\n  startX: 0,\n  startY: 0\n};\nexport default ((propHook, zoomRate, normalizeXY) => {\n  const zoomIn = propHook.zoomIn,\n        zoomOut = propHook.zoomOut,\n        moveXY = propHook.moveXY;\n\n  const getWheelDelta = e => {\n    if (e.wheelDelta) {\n      return e.wheelDelta;\n    } else {\n      return -e.wheelDelta * 40;\n    }\n  };\n\n  const handleWhellEventWithkey = e => {\n    if (e.ctrlKey === true && e.wheelDelta) {\n      e.preventDefault();\n      e.stopPropagation();\n      getWheelDelta(e) > 0 ? zoomIn(e.clientX, e.clientY) : zoomOut(e.clientX, e.clientY);\n      return;\n    }\n\n    if (e.buttons === 1 && e.type === 'mousedown') {\n      mousemoveInfo.startX = e.clientX;\n      mousemoveInfo.startY = e.clientY;\n      return;\n    }\n\n    if (e.altKey && e.buttons === 1) {\n      e.stopPropagation();\n      const startX = mousemoveInfo.startX,\n            startY = mousemoveInfo.startY;\n      const movedX = e.clientX - startX;\n      const movedY = e.clientY - startY;\n      moveXY(movedX / 10 / normalizeXY, movedY / 10);\n      mousemoveInfo.startX = e.clientX;\n      mousemoveInfo.startY = e.clientY;\n    }\n  };\n\n  return event => {\n    try {\n      handleWhellEventWithkey(event); // 据说在 try 代码块中写大量语句会影响性能，因此包装为函数\n    } catch (e) {\n      alert('移动或缩放功能异常', e);\n    }\n  };\n});","map":{"version":3,"sources":["/Users/liuhongyang/Desktop/RMind-develop/src/methods/getMouseWheelEvent.js"],"names":["mousemoveInfo","startX","startY","propHook","zoomRate","normalizeXY","zoomIn","zoomOut","moveXY","getWheelDelta","e","wheelDelta","handleWhellEventWithkey","ctrlKey","preventDefault","stopPropagation","clientX","clientY","buttons","type","altKey","movedX","movedY","event","alert"],"mappings":"AAAA,MAAMA,aAAa,GAAG;AAClBC,EAAAA,MAAM,EAAE,CADU;AAElBC,EAAAA,MAAM,EAAE;AAFU,CAAtB;AAKA,gBAAe,CAACC,QAAD,EAAWC,QAAX,EAAoBC,WAApB,KAAoC;AAAA,QACvCC,MADuC,GACXH,QADW,CACvCG,MADuC;AAAA,QAC/BC,OAD+B,GACXJ,QADW,CAC/BI,OAD+B;AAAA,QACtBC,MADsB,GACXL,QADW,CACtBK,MADsB;;AAE/C,QAAMC,aAAa,GAAIC,CAAD,IAAO;AACzB,QAAIA,CAAC,CAACC,UAAN,EAAkB;AACd,aAAOD,CAAC,CAACC,UAAT;AACH,KAFD,MAEO;AACH,aAAO,CAACD,CAAC,CAACC,UAAH,GAAgB,EAAvB;AACH;AACJ,GAND;;AAQA,QAAMC,uBAAuB,GAAGF,CAAC,IAAI;AAEjC,QAAIA,CAAC,CAACG,OAAF,KAAc,IAAd,IAAsBH,CAAC,CAACC,UAA5B,EAAwC;AACpCD,MAAAA,CAAC,CAACI,cAAF;AACAJ,MAAAA,CAAC,CAACK,eAAF;AACAN,MAAAA,aAAa,CAACC,CAAD,CAAb,GAAmB,CAAnB,GAAuBJ,MAAM,CAACI,CAAC,CAACM,OAAH,EAAWN,CAAC,CAACO,OAAb,CAA7B,GAAqDV,OAAO,CAACG,CAAC,CAACM,OAAH,EAAWN,CAAC,CAACO,OAAb,CAA5D;AACA;AACH;;AAED,QAAIP,CAAC,CAACQ,OAAF,KAAc,CAAd,IAAmBR,CAAC,CAACS,IAAF,KAAW,WAAlC,EAA+C;AAC3CnB,MAAAA,aAAa,CAACC,MAAd,GAAuBS,CAAC,CAACM,OAAzB;AACAhB,MAAAA,aAAa,CAACE,MAAd,GAAuBQ,CAAC,CAACO,OAAzB;AACA;AACH;;AAED,QAAIP,CAAC,CAACU,MAAF,IAAYV,CAAC,CAACQ,OAAF,KAAc,CAA9B,EAAiC;AAC7BR,MAAAA,CAAC,CAACK,eAAF;AAD6B,YAErBd,MAFqB,GAEFD,aAFE,CAErBC,MAFqB;AAAA,YAEbC,MAFa,GAEFF,aAFE,CAEbE,MAFa;AAG7B,YAAMmB,MAAM,GAAIX,CAAC,CAACM,OAAF,GAAYf,MAA5B;AACA,YAAMqB,MAAM,GAAIZ,CAAC,CAACO,OAAF,GAAYf,MAA5B;AACAM,MAAAA,MAAM,CAACa,MAAM,GAAG,EAAT,GAAchB,WAAf,EAA4BiB,MAAM,GAAG,EAArC,CAAN;AACAtB,MAAAA,aAAa,CAACC,MAAd,GAAuBS,CAAC,CAACM,OAAzB;AACAhB,MAAAA,aAAa,CAACE,MAAd,GAAuBQ,CAAC,CAACO,OAAzB;AACH;AACJ,GAxBD;;AA0BA,SAAOM,KAAK,IAAI;AACZ,QAAI;AACAX,MAAAA,uBAAuB,CAACW,KAAD,CAAvB,CADA,CACgC;AACnC,KAFD,CAEE,OAAOb,CAAP,EAAU;AACRc,MAAAA,KAAK,CAAC,WAAD,EAAad,CAAb,CAAL;AACH;AACJ,GAND;AAOH,CA3CD","sourcesContent":["const mousemoveInfo = {\n    startX: 0,\n    startY: 0,\n}\n\nexport default (propHook, zoomRate,normalizeXY) => {\n    const { zoomIn, zoomOut, moveXY } = propHook;\n    const getWheelDelta = (e) => {\n        if (e.wheelDelta) {\n            return e.wheelDelta\n        } else {\n            return -e.wheelDelta * 40\n        }\n    }\n\n    const handleWhellEventWithkey = e => {\n\n        if (e.ctrlKey === true && e.wheelDelta) {\n            e.preventDefault()\n            e.stopPropagation()\n            getWheelDelta(e) > 0 ? zoomIn(e.clientX,e.clientY) : zoomOut(e.clientX,e.clientY)\n            return;\n        }\n\n        if (e.buttons === 1 && e.type === 'mousedown') {\n            mousemoveInfo.startX = e.clientX\n            mousemoveInfo.startY = e.clientY\n            return\n        }\n\n        if (e.altKey && e.buttons === 1) {\n            e.stopPropagation()\n            const { startX, startY } = mousemoveInfo;\n            const movedX = (e.clientX - startX);\n            const movedY = (e.clientY - startY);\n            moveXY(movedX / 10 / normalizeXY, movedY / 10)\n            mousemoveInfo.startX = e.clientX\n            mousemoveInfo.startY = e.clientY\n        }\n    };\n\n    return event => {\n        try {\n            handleWhellEventWithkey(event); // 据说在 try 代码块中写大量语句会影响性能，因此包装为函数\n        } catch (e) {\n            alert('移动或缩放功能异常',e);\n        }\n    };\n};"]},"metadata":{},"sourceType":"module"}