{"ast":null,"code":"import { useContext } from 'react';\nimport { context } from '../context';\nimport { setMindmap } from '../context/reducer/mindmap/actionCreator.js';\nimport { setSelect } from '../context/reducer/nodeStatus/actionCreator.js';\nexport default (() => {\n  const _useContext = useContext(context),\n        mDispatch = _useContext.mindmap.dispatch,\n        nDispatch = _useContext.nodeStatus.dispatch,\n        history = _useContext.history.state;\n\n  const applySnapshot = snapshot => {\n    if (snapshot) {\n      const mindmap = snapshot.mindmap,\n            cur_node = snapshot.cur_node;\n      mDispatch(setMindmap(JSON.parse(mindmap)));\n      nDispatch(setSelect(cur_node));\n    }\n  };\n\n  return {\n    undoHistory: () => {\n      applySnapshot(history.undo[history.undo.length - 1]);\n    },\n    redoHistory: () => {\n      applySnapshot(history.redo[0]);\n    }\n  };\n});","map":{"version":3,"sources":["/Users/liuhongyang/Desktop/RMind-develop/src/customHooks/useHistory.js"],"names":["useContext","context","setMindmap","setSelect","mDispatch","mindmap","dispatch","nDispatch","nodeStatus","history","state","applySnapshot","snapshot","cur_node","JSON","parse","undoHistory","undo","length","redoHistory","redo"],"mappings":"AAAA,SAAQA,UAAR,QAAyB,OAAzB;AACA,SAAQC,OAAR,QAAsB,YAAtB;AACA,SAAQC,UAAR,QAAyB,6CAAzB;AACA,SAAQC,SAAR,QAAwB,gDAAxB;AAEA,gBAAe,MAAM;AAAA,sBACsFH,UAAU,CAACC,OAAD,CADhG;AAAA,QACUG,SADV,eACVC,OADU,CACAC,QADA;AAAA,QAC6CC,SAD7C,eACsBC,UADtB,CACmCF,QADnC;AAAA,QAC0EG,OAD1E,eACyDA,OADzD,CACmEC,KADnE;;AAGjB,QAAMC,aAAa,GAAGC,QAAQ,IAAI;AAC9B,QAAIA,QAAJ,EAAc;AAAA,YACHP,OADG,GACkBO,QADlB,CACHP,OADG;AAAA,YACMQ,QADN,GACkBD,QADlB,CACMC,QADN;AAEVT,MAAAA,SAAS,CAACF,UAAU,CAACY,IAAI,CAACC,KAAL,CAAWV,OAAX,CAAD,CAAX,CAAT;AACAE,MAAAA,SAAS,CAACJ,SAAS,CAACU,QAAD,CAAV,CAAT;AACH;AACJ,GAND;;AAQA,SAAO;AACHG,IAAAA,WAAW,EAAE,MAAM;AACfL,MAAAA,aAAa,CAACF,OAAO,CAACQ,IAAR,CAAaR,OAAO,CAACQ,IAAR,CAAaC,MAAb,GAAsB,CAAnC,CAAD,CAAb;AACH,KAHE;AAIHC,IAAAA,WAAW,EAAE,MAAM;AACfR,MAAAA,aAAa,CAACF,OAAO,CAACW,IAAR,CAAa,CAAb,CAAD,CAAb;AACH;AANE,GAAP;AAQH,CAnBD","sourcesContent":["import {useContext} from 'react';\nimport {context} from '../context';\nimport {setMindmap} from '../context/reducer/mindmap/actionCreator.js';\nimport {setSelect} from '../context/reducer/nodeStatus/actionCreator.js';\n\nexport default () => {\n    const {mindmap: {dispatch: mDispatch}, nodeStatus: {dispatch: nDispatch}, history: {state: history}} = useContext(context);\n\n    const applySnapshot = snapshot => {\n        if (snapshot) {\n            const {mindmap, cur_node} = snapshot;\n            mDispatch(setMindmap(JSON.parse(mindmap)));\n            nDispatch(setSelect(cur_node));\n        }\n    };\n\n    return {\n        undoHistory: () => {\n            applySnapshot(history.undo[history.undo.length - 1]);\n        },\n        redoHistory: () => {\n            applySnapshot(history.redo[0]);\n        }\n    }\n}\n\n"]},"metadata":{},"sourceType":"module"}