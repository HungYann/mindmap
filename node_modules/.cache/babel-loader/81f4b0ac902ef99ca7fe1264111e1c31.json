{"ast":null,"code":"var mousemoveInfo={startX:0,startY:0};export default(function(propHook,zoomRate,normalizeXY){var zoomIn=propHook.zoomIn,zoomOut=propHook.zoomOut,moveXY=propHook.moveXY;var getWheelDelta=function getWheelDelta(e){if(e.wheelDelta){return e.wheelDelta;}else{return-e.wheelDelta*40;}};var handleWhellEventWithkey=function handleWhellEventWithkey(e){if(e.ctrlKey===true&&e.wheelDelta){e.preventDefault();e.stopPropagation();getWheelDelta(e)>0?zoomIn(e.clientX,e.clientY):zoomOut(e.clientX,e.clientY);return;}if(e.buttons===1&&e.type==='mousedown'){mousemoveInfo.startX=e.clientX;mousemoveInfo.startY=e.clientY;return;}if(e.altKey&&e.buttons===1){e.stopPropagation();var startX=mousemoveInfo.startX,startY=mousemoveInfo.startY;var movedX=e.clientX-startX;var movedY=e.clientY-startY;moveXY(movedX/10/normalizeXY,movedY/10);mousemoveInfo.startX=e.clientX;mousemoveInfo.startY=e.clientY;}};return function(event){try{handleWhellEventWithkey(event);// 据说在 try 代码块中写大量语句会影响性能，因此包装为函数\n}catch(e){alert('移动或缩放功能异常',e);}};});","map":{"version":3,"sources":["/Users/liuhongyang/Documents/GitHub/repositories/mindmap/src/methods/getMouseWheelEvent.js"],"names":["mousemoveInfo","startX","startY","propHook","zoomRate","normalizeXY","zoomIn","zoomOut","moveXY","getWheelDelta","e","wheelDelta","handleWhellEventWithkey","ctrlKey","preventDefault","stopPropagation","clientX","clientY","buttons","type","altKey","movedX","movedY","event","alert"],"mappings":"AAAA,GAAMA,CAAAA,aAAa,CAAG,CAClBC,MAAM,CAAE,CADU,CAElBC,MAAM,CAAE,CAFU,CAAtB,CAKA,eAAe,SAACC,QAAD,CAAWC,QAAX,CAAoBC,WAApB,CAAoC,IACvCC,CAAAA,MADuC,CACXH,QADW,CACvCG,MADuC,CAC/BC,OAD+B,CACXJ,QADW,CAC/BI,OAD+B,CACtBC,MADsB,CACXL,QADW,CACtBK,MADsB,CAE/C,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,CAAD,CAAO,CACzB,GAAIA,CAAC,CAACC,UAAN,CAAkB,CACd,MAAOD,CAAAA,CAAC,CAACC,UAAT,CACH,CAFD,IAEO,CACH,MAAO,CAACD,CAAC,CAACC,UAAH,CAAgB,EAAvB,CACH,CACJ,CAND,CAQA,GAAMC,CAAAA,uBAAuB,CAAG,QAA1BA,CAAAA,uBAA0B,CAAAF,CAAC,CAAI,CAEjC,GAAIA,CAAC,CAACG,OAAF,GAAc,IAAd,EAAsBH,CAAC,CAACC,UAA5B,CAAwC,CACpCD,CAAC,CAACI,cAAF,GACAJ,CAAC,CAACK,eAAF,GACAN,aAAa,CAACC,CAAD,CAAb,CAAmB,CAAnB,CAAuBJ,MAAM,CAACI,CAAC,CAACM,OAAH,CAAWN,CAAC,CAACO,OAAb,CAA7B,CAAqDV,OAAO,CAACG,CAAC,CAACM,OAAH,CAAWN,CAAC,CAACO,OAAb,CAA5D,CACA,OACH,CAED,GAAIP,CAAC,CAACQ,OAAF,GAAc,CAAd,EAAmBR,CAAC,CAACS,IAAF,GAAW,WAAlC,CAA+C,CAC3CnB,aAAa,CAACC,MAAd,CAAuBS,CAAC,CAACM,OAAzB,CACAhB,aAAa,CAACE,MAAd,CAAuBQ,CAAC,CAACO,OAAzB,CACA,OACH,CAED,GAAIP,CAAC,CAACU,MAAF,EAAYV,CAAC,CAACQ,OAAF,GAAc,CAA9B,CAAiC,CAC7BR,CAAC,CAACK,eAAF,GAD6B,GAErBd,CAAAA,MAFqB,CAEFD,aAFE,CAErBC,MAFqB,CAEbC,MAFa,CAEFF,aAFE,CAEbE,MAFa,CAG7B,GAAMmB,CAAAA,MAAM,CAAIX,CAAC,CAACM,OAAF,CAAYf,MAA5B,CACA,GAAMqB,CAAAA,MAAM,CAAIZ,CAAC,CAACO,OAAF,CAAYf,MAA5B,CACAM,MAAM,CAACa,MAAM,CAAG,EAAT,CAAchB,WAAf,CAA4BiB,MAAM,CAAG,EAArC,CAAN,CACAtB,aAAa,CAACC,MAAd,CAAuBS,CAAC,CAACM,OAAzB,CACAhB,aAAa,CAACE,MAAd,CAAuBQ,CAAC,CAACO,OAAzB,CACH,CACJ,CAxBD,CA0BA,MAAO,UAAAM,KAAK,CAAI,CACZ,GAAI,CACAX,uBAAuB,CAACW,KAAD,CAAvB,CAAgC;AACnC,CAAC,MAAOb,CAAP,CAAU,CACRc,KAAK,CAAC,WAAD,CAAad,CAAb,CAAL,CACH,CACJ,CAND,CAOH,CA3CD","sourcesContent":["const mousemoveInfo = {\n    startX: 0,\n    startY: 0,\n}\n\nexport default (propHook, zoomRate,normalizeXY) => {\n    const { zoomIn, zoomOut, moveXY } = propHook;\n    const getWheelDelta = (e) => {\n        if (e.wheelDelta) {\n            return e.wheelDelta\n        } else {\n            return -e.wheelDelta * 40\n        }\n    }\n\n    const handleWhellEventWithkey = e => {\n\n        if (e.ctrlKey === true && e.wheelDelta) {\n            e.preventDefault()\n            e.stopPropagation()\n            getWheelDelta(e) > 0 ? zoomIn(e.clientX,e.clientY) : zoomOut(e.clientX,e.clientY)\n            return;\n        }\n\n        if (e.buttons === 1 && e.type === 'mousedown') {\n            mousemoveInfo.startX = e.clientX\n            mousemoveInfo.startY = e.clientY\n            return\n        }\n\n        if (e.altKey && e.buttons === 1) {\n            e.stopPropagation()\n            const { startX, startY } = mousemoveInfo;\n            const movedX = (e.clientX - startX);\n            const movedY = (e.clientY - startY);\n            moveXY(movedX / 10 / normalizeXY, movedY / 10)\n            mousemoveInfo.startX = e.clientX\n            mousemoveInfo.startY = e.clientY\n        }\n    };\n\n    return event => {\n        try {\n            handleWhellEventWithkey(event); // 据说在 try 代码块中写大量语句会影响性能，因此包装为函数\n        } catch (e) {\n            alert('移动或缩放功能异常',e);\n        }\n    };\n};"]},"metadata":{},"sourceType":"module"}