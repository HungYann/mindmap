(this.webpackJsonprmind=this.webpackJsonprmind||[]).push([[0],{1:function(e,n,t){"use strict";t.d(n,"c",(function(){return r})),t.d(n,"g",(function(){return a})),t.d(n,"b",(function(){return c})),t.d(n,"i",(function(){return o})),t.d(n,"h",(function(){return i})),t.d(n,"d",(function(){return u})),t.d(n,"e",(function(){return d})),t.d(n,"f",(function(){return l})),t.d(n,"a",(function(){return f})),t.d(n,"n",(function(){return s})),t.d(n,"m",(function(){return m})),t.d(n,"k",(function(){return p})),t.d(n,"l",(function(){return b})),t.d(n,"j",(function(){return h}));var r="nodeLeft",a="nodeRight",c="dropArea",o={id:"",children:[]},i="rmind_root_node",u="rmind_mindmap_wrapper",d="rmind_main",l="\u65b0\u5efa\u8282\u70b9",f="\u672a\u547d\u540d\u5bfc\u56fe",s="--theme-main",m="--theme-light",p="--theme-dark",b="--theme-ex",h="--theme-assist"},10:function(e,n,t){"use strict";t.d(n,"b",(function(){return m})),t.d(n,"d",(function(){return p})),t.d(n,"c",(function(){return b})),t.d(n,"a",(function(){return h})),t.d(n,"e",(function(){return v}));var r=t(3),a=t(0),c=t.n(a),o=t(2),i=t(1);function u(){var e=Object(r.a)(["\ntext-decoration: underline;\ncursor: pointer;\n"]);return u=function(){return e},e}function d(){var e=Object(r.a)(["\ncolor: #888888;\nfont-size: 90%;\n"]);return d=function(){return e},e}function l(){var e=Object(r.a)(["\nmargin-top: 0;\ncolor: var(",");\nfont-weight: 700;\n"]);return l=function(){return e},e}function f(){var e=Object(r.a)([" /* button& \u7528\u4e8e\u63d0\u9ad8 CSS \u6743\u91cd */\nbutton& {\ncolor: #ffffff;\nbackground-color: var(",");\nborder: 1px solid var(",");\n}\n"]);return f=function(){return e},e}function s(){var e=Object(r.a)(["\ndisplay: flex;\njustify-content: flex-end;\nmargin-top: 20px;\n\nbutton {\nmargin-left: 20px;\npadding: 10px 20px;\nbackground-color: #ffffff;\nborder-radius: 10px;\noutline: none;\n}\n\nbutton:active {\ntransform: scale(0.95);\n}\n"]);return s=function(){return e},e}var m=function(e){return c.a.createElement("div",Object.assign({},e,{className:Object(o.a)(s())}))},p=function(e){return c.a.createElement("button",Object.assign({},e,{className:Object(o.a)(f(),i.k,i.n)}))},b=function(e){return c.a.createElement("p",Object.assign({},e,{className:Object(o.a)(l(),i.j)}))},h=function(e){return c.a.createElement("p",Object.assign({},e,{className:Object(o.a)(d())}))},v=function(e){return c.a.createElement("a",Object.assign({},e,{className:Object(o.a)(u())}))}},11:function(e,n,t){"use strict";t.d(n,"d",(function(){return c})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return u}));var r=t(15),a=t(14),c=function(e,n){return{type:a.d,data:{cur_select:e,select_by_click:n||!1,cur_edit:"",cur_node_info:{}}}},o=function(e){return{type:a.c,data:{cur_select:"",cur_edit:e,cur_node_info:{}}}},i=function(){return{type:a.a,data:{cur_select:"",select_by_click:!1,cur_edit:"",cur_node_info:{}}}},u=function(e,n,t){return{type:a.b,data:{cur_node_info:Object(r.a)(Object(r.a)({},e),{},{parent:n,on_left:t})}}}},12:function(e,n,t){"use strict";t.d(n,"i",(function(){return c})),t.d(n,"a",(function(){return o})),t.d(n,"b",(function(){return i})),t.d(n,"g",(function(){return u})),t.d(n,"d",(function(){return d})),t.d(n,"c",(function(){return l})),t.d(n,"e",(function(){return f})),t.d(n,"f",(function(){return s})),t.d(n,"h",(function(){return m}));var r=t(7),a=t(1),c=function(e,n){return{type:r.h,data:{node_id:e,node:{showChildren:n}}}},o=function(e,n){return{type:r.a,data:{node_id:e,node:{id:n,text:a.f,showChildren:!0,children:[]}}}},i=function(e,n,t){return{type:r.b,data:{node_id:e,parent_id:n,node:{id:t,text:a.f,showChildren:!0,children:[]}}}},u=function(e,n,t,a){return{type:r.f,data:{node_id:e,target_id:n,parent_id:t,is_sibling:a}}},d=function(e,n){return{type:r.c,data:{node_id:e,node:{text:n}}}},l=function(e,n){return{type:r.c,data:{node_id:e,node:{info:n}}}},f=function(e,n){return{type:r.d,data:{node_id:e,parent_id:n}}},s=function(e){return{type:r.e,data:{node_id:e}}},m=function(e){return{type:r.g,data:{mindmap:e}}}},14:function(e,n,t){"use strict";t.d(n,"d",(function(){return r})),t.d(n,"c",(function(){return a})),t.d(n,"b",(function(){return c})),t.d(n,"a",(function(){return o}));var r="nodeStatus/setSelect",a="nodeStatus/setEdit",c="nodeStatus/getNodeInfo",o="nodeStatus/clearAll"},16:function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"a",(function(){return a}));var r="history/setHistory",a="history/clearHistory"},20:function(e,n,t){"use strict";var r=t(1);n.a={id:r.h,text:"\u4e3b\u9898",showChildren:!0,children:[{id:"Sub1",text:"\u5206\u652f1",showChildren:!0,children:[]},{id:"Sub2",text:"\u5206\u652f2",showChildren:!0,children:[]},{id:"Sub3",text:"\u5206\u652f3",showChildren:!0,children:[]}]}},21:function(e,n,t){"use strict";t.d(n,"a",(function(){return r}));var r="editPanel/togglePanelShow"},22:function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"a",(function(){return c}));var r=t(16),a=function(e,n){return{type:r.b,data:e?{mindmap:e,cur_node:n}:null}},c=function(){return{type:r.a}}},232:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(29),o=t.n(c),i=(t(35),t(36),t(5)),u=t(3),d=t(2),l=t(9),f=function(e){return{type:l.e,data:{title:e}}},s=function(){var e=Object(r.useContext)(i.a).global,n=e.state,t=n.theme_index,a=n.theme_list,c=e.dispatch;return{theme:Object(r.useMemo)((function(){return a[t]}),[t]),theme_index:t,theme_list:a,setTheme:function(e){c(function(e){return{type:l.d,data:{theme_index:e}}}(e))}}},m=t(1);function p(){var e=Object(u.a)(["\n    ",": ",";\n    ",": ",";\n    ",": ",";\n    ",": ",";\n    ",": ",";\n    "]);return p=function(){return e},e}var b=function(e){var n=e.children,t=s().theme;return a.a.createElement("div",{className:Object(d.a)(p(),m.n,t.main,m.m,t.light,m.j,t.assist,m.k,t.dark,m.l,t.ex)},n)},h=t(6),v=t(8),g=t(12),O=t(11),j=function(){var e=Object(r.useContext)(i.a),n=e.mindmap.dispatch,t=e.nodeStatus.dispatch,a=e.history.state,c=function(e){if(e){var r=e.mindmap,a=e.cur_node;n(Object(g.h)(JSON.parse(r))),t(Object(O.d)(a))}};return{undoHistory:function(){c(a.undo[a.undo.length-1])},redoHistory:function(){c(a.redo[0])}}},x=function(){var e=Object(r.useContext)(i.a).global.dispatch;return{zoomIn:function(n,t){e(function(e,n){return{type:l.f,data:{x:e,y:n}}}(n,t))},zoomOut:function(n,t){e(function(e,n){return{type:l.g,data:{x:e,y:n}}}(n,t))},zoomReset:function(){var n;e({type:l.h,data:{zoomRate:n}})}}},E=function(){var e=Object(r.useContext)(i.a).global.dispatch;return{moveXY:function(n,t){e(function(e,n){return{type:l.b,data:{x:e,y:n}}}(n,t))},moveReset:function(){e({type:l.a,data:{}})}}},_=t(4),w=t(13);t(43);function y(){var e=Object(u.a)(["\n&, &:hover {\ncolor: #cccccc;\n}\n\ncursor: not-allowed;\n"]);return y=function(){return e},e}function k(){var e=Object(u.a)(["\nmargin: 0 0.12em;\npadding: 0 0.24em;\n/* margin \u7528\u4e8e\u589e\u52a0\u95f4\u9694\uff0cpadding \u7528\u4e8e\u589e\u5927\u53ef\u70b9\u51fb\u533a\u57df */\nbackground-color: transparent;\nborder: none;\noutline: none;\ncursor: pointer;\n\ni {\ndisplay: block;\nmargin-bottom: 0.12em;\nfont-size: 100%;\n}\nspan {\ndisplay: block;\nfont-size: 25%;\n}\n\n&:active {\ntransform: scale(0.95);\n}\n\n&:hover {\ncolor: var(",");\n}\n"]);return k=function(){return e},e}var C=function(e){var n=e.icon,t=e.onClick,r=e.children,c=e.disabled;return a.a.createElement("button",{onClick:c?_.e:t,className:Object(d.b)(N,Object(w.a)({},S,c))},a.a.createElement("i",{className:"zwicon-"+n}),a.a.createElement("span",null,r))},N=Object(d.a)(k(),m.j),S=Object(d.a)(y());function z(){var e=Object(u.a)(["\nalign-self: center;\npadding: 0 10px; /* \u4e24\u4fa7 padding \u7528\u4e8e\u589e\u5927\u7ec4\u4ef6\u70b9\u51fb\u533a\u57df\uff0c\u907f\u514d\u5c06\u5149\u6807\u5b9a\u4f4d\u81f3\u9996\u5c3e\u5904\u65f6\u610f\u5916 blur */\ncolor: var(",");\nfont-size: 20px;\nfont-weight: 700;\nborder-bottom: 2px solid transparent;\noutline: none;\ntransition: 0.2s;\n\n&:read-write {\ncursor: edit;\n}\n\n&:focus {\nborder-bottom: 2px solid var(",");\n}\n"]);return z=function(){return e},e}var R=function(){var e=Object(r.useRef)(),n=Object(r.useContext)(i.a).global,t=n.state.title,c=n.dispatch;Object(r.useEffect)((function(){document.title="RMind - ".concat(t),localStorage.setItem("title",t)}),[t]);return a.a.createElement("span",{ref:e,className:L,contentEditable:"true",suppressContentEditableWarning:"true",spellCheck:"false",onKeyDown:function(n){switch(n.key.toUpperCase()){case"ESCAPE":e.current.textContent=t;case"ENTER":e.current.blur()}},onBlur:function(){var n=e.current.textContent.trim();""===n&&(n=t),n.length>30&&(n=n.slice(0,30)),e.current.textContent=n,c(f(n))}},t)},L=Object(d.a)(z(),m.k,m.j),P=t(20),D=t(10),T=function(e){var n=e.handleClosePopup,t=e.handleDownload,c=Object(r.useContext)(i.a).global.dispatch,o=Object(v.a)().setMindmap;return a.a.createElement("div",null,a.a.createElement(D.c,null,"\u65b0\u5efa\u5bfc\u56fe\u540e\uff0c\u5f53\u524d\u601d\u7ef4\u5bfc\u56fe\u7684\u6570\u636e\u5c06\u4e22\u5931\u3002"),a.a.createElement(D.a,null,"\u8981\u4fdd\u5b58\u5f53\u524d\u6570\u636e\uff0c\u8bf7\u5c06\u601d\u7ef4\u5bfc\u56fe",a.a.createElement(D.e,{onClick:t},"\u4e0b\u8f7d\u81f3\u672c\u5730"),"\u3002"),a.a.createElement(D.b,null,a.a.createElement(D.d,{onClick:function(){o(P.a,!0),c(f(m.a)),n()}},"\u65b0\u5efa\u5bfc\u56fe"),a.a.createElement("button",{onClick:n},"\u53d6\u6d88")))},I=t(18),M=t.n(I),A=function(e,n){var t,r;switch(n){case"MD":return e.match(/^#{1,6} /)?(t=e.match(/^#{1,6} /)[0].length-2,r=e.replace(/^#{1,6} /,"")):e.match(/^\s*[-*] /)&&(t=e.match(/^\s*[-*] /)[0].length+4,r=e.replace(/^\s*[-*] /,"")),{layer:t,text:r};case"TXT":return{layer:t=e.match(/^\s*/)[0].length,text:r=e.replace(/^\s*/,"")};default:return{layer:t,text:r}}},W=function(e,n){switch(n){case"RMF":return JSON.parse(e);case"KM":return function e(n,t,r,a){switch(n){case"KM":return t.id=a?m.h:r.data.id,t.text=r.data.text,t.showChildren="collapse"!==r.data.expandState,t.children=r.children.map((function(t){return e(n,{},t)})),t;default:return}}(n,{},JSON.parse(e).root,!0);default:return}},H=function(e,n){var t;switch(n){case"MD":case"TXT":t=function e(n,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(0!==n.length||-1!==r){if(-1===r){var c=A(n.shift(),t);r=c.layer||0,a=c.text||"\u672a\u77e5\u6570\u636e"}for(var o={id:0===r?m.h:M()(""+Date.now()+Math.random()+a),text:a,showChildren:!0,children:[]};n.length>0;){var i=A(n[0],t),u=i.layer,d=i.text;if(u<=r)break;n.shift(),u&&o.children.push(e(n,t,u,d))}return o}}(e.split("\n").filter((function(e){return e})),n,-1);break;default:t=W(e,n)}return t};function X(){var e=Object(u.a)(["\nmargin: 0;\npadding: 0;\nfont-size: 90%;\nlist-style: circle inside;\n\nli {\nline-height: 2em;\n}\n"]);return X=function(){return e},e}function B(){var e=Object(u.a)(["\nmargin: 20px 0 5px;\npadding-bottom: 8px;\nborder-bottom: 1px solid #dddddd;\n"]);return B=function(){return e},e}var Y=function(e){var n=e.handleClosePopup,t=e.handleDownload,c=Object(r.useContext)(i.a).global.dispatch,o=Object(v.a)().setMindmap;return a.a.createElement("div",null,a.a.createElement(D.c,null,"\u6253\u5f00\u5176\u4ed6\u6587\u4ef6\u540e\uff0c\u5f53\u524d\u601d\u7ef4\u5bfc\u56fe\u7684\u6570\u636e\u5c06\u4e22\u5931\u3002"),a.a.createElement(D.a,null,"\u8981\u4fdd\u5b58\u5f53\u524d\u6570\u636e\uff0c\u8bf7\u5c06\u601d\u7ef4\u5bfc\u56fe",a.a.createElement(D.e,{onClick:t},"\u4e0b\u8f7d\u81f3\u672c\u5730"),"\u3002"),a.a.createElement("p",{className:K},"\u652f\u6301\u6253\u5f00\u683c\u5f0f\uff1a"),a.a.createElement("ul",{className:q},a.a.createElement("li",null,"RMind\uff08.rmf\uff09"),a.a.createElement("li",null,"\u767e\u5ea6\u8111\u56fe\uff08.km\uff09"),a.a.createElement("li",null,"Markdown\uff08.md\uff09"),a.a.createElement("li",null,"\u6587\u672c\u6587\u4ef6\uff08.txt\uff09")),a.a.createElement(D.b,null,a.a.createElement(D.d,{onClick:function(){var e=document.createElement("input");e.type="file",e.accept=".rmf,.km,.txt,.md",e.addEventListener("change",(function(e){for(var t=e.target.files[0],r=t.name,a=r.length-1;a>0&&"."!==r[a];)a--;var i=r.slice(a+1).toUpperCase(),u=r.slice(0,a),d=new FileReader;d.onload=function(e){var t=e.target.result,r=H(t,i);r&&r.id===m.h?(o(r,!0),c(f(u)),n()):alert("\u4e0d\u662f\u6709\u6548\u7684\u601d\u7ef4\u5bfc\u56fe\u6587\u4ef6")},d.readAsText(t)})),e.click()}},"\u6253\u5f00\u6587\u4ef6"),a.a.createElement("button",{onClick:n},"\u53d6\u6d88")))},K=Object(d.a)(B()),q=Object(d.a)(X());function J(){var e=Object(u.a)(["\nbox-shadow: 0 0 0 4px #ffffff, 0 0 0 6px #000000; /* \u4e24\u5c42\u9634\u5f71\u5b9e\u73b0\u6846\u9009\u6548\u679c\uff0c\u4e5f\u53ef\u7528 inset \u9634\u5f71 + border-color \u505a */\n"]);return J=function(){return e},e}function U(){var e=Object(u.a)(["\ndisplay: flex;\nbox-sizing: border-box;\nwidth: 47%;\nheight: 25px;\nmargin: 8px 0;\nborder-radius: 18px;\ncursor: pointer;\noverflow: hidden;\n\ndiv {\nflex: 1;\nz-index: -1;\n}\n"]);return U=function(){return e},e}var F=function(e){var n=e.theme,t=e.index,r=e.is_current,c=e.setTheme;return a.a.createElement("li",{className:Object(d.b)(V,Object(w.a)({},Z,r)),onClick:function(){c(t)}},a.a.createElement("div",{style:{backgroundColor:n.ex}}),a.a.createElement("div",{style:{backgroundColor:n.dark}}),a.a.createElement("div",{style:{backgroundColor:n.main}}),a.a.createElement("div",{style:{backgroundColor:n.light}}))},V=Object(d.a)(U()),Z=Object(d.a)(J());function G(){var e=Object(u.a)(["\ndisplay: flex;\njustify-content: space-between;\nflex-wrap: wrap;\npadding: 0;\nlist-style: none;\n"]);return G=function(){return e},e}var $=function(e){var n=e.handleClosePopup,t=s(),c=t.theme_index,o=t.theme_list,i=t.setTheme;return Object(r.useEffect)((function(){localStorage.setItem("theme_index",c)}),[c]),a.a.createElement("div",null,a.a.createElement(D.c,null,"\u8bf7\u9009\u62e9\u4e3b\u9898\uff1a"),a.a.createElement("ul",{className:Q},o.map((function(e,n){return a.a.createElement(F,{key:e.main,theme:e,index:n,is_current:c===n,setTheme:i})}))),a.a.createElement(D.b,null,a.a.createElement("button",{onClick:n},"\u5b8c\u6210")))},Q=Object(d.a)(G());function ee(){var e=Object(u.a)(["\nposition: absolute;\ntop:0;\nbottom:0;\nleft:0;\nright:0;\nbackground: #000000;\nopacity: 0.2;\n"]);return ee=function(){return e},e}function ne(){var e=Object(u.a)(["\nposition: absolute;\ntop: 10px;\nright: 10px;\nfont-size: 25px;\nfont-weight: 700;\n\n&:active {\ntransform: scale(0.95)\n}\n"]);return ne=function(){return e},e}function te(){var e=Object(u.a)(["\ndisplay: flex;\nflex-direction: column;\nposition: absolute;\ntop:30%;\nleft:0;\nright:0;\nwidth: 400px;\nmargin: auto;\npadding: 40px 40px 20px;\nfont-size: 1rem;\nbackground-color: #ffffff;\nborder-radius: 20px;\nz-index: 1;\n"]);return te=function(){return e},e}function re(){var e=Object(u.a)(["\nposition: fixed;\ntop:0;\nbottom:0;\nleft:0;\nright:0;\n"]);return re=function(){return e},e}var ae=function(e){var n=e.type,c=e.handleClosePopup,o=e.handleDownload,i=function(e){switch(e){case"new":return T;case"open":return Y;case"export":return Object(r.lazy)((function(){return Promise.all([t.e(4),t.e(3)]).then(t.bind(null,234))}));case"theme":return $;default:return}}(n);return a.a.createElement("div",{className:ce,onClick:_.e},a.a.createElement("div",{className:oe},a.a.createElement("i",{className:"zwicon-close-circle "+ie,onClick:c}),a.a.createElement(r.Suspense,{fallback:a.a.createElement(a.a.Fragment,null)},a.a.createElement(i,{handleClosePopup:c,handleDownload:o}))),a.a.createElement("div",{className:ue,onClick:c}))},ce=Object(d.a)(re()),oe=Object(d.a)(te()),ie=Object(d.a)(ne()),ue=Object(d.a)(ee());function de(){var e=Object(u.a)(["\ndisplay: flex;\n"]);return de=function(){return e},e}function le(){var e=Object(u.a)(["\ndisplay: flex;\njustify-content: space-between;\nposition: fixed;\ntop:0;\nleft:0;\nright:0;\nheight: 56px;\npadding: 0 50px;\nfont-size: 25px;\nbackground-color: #ffffff;\nbox-shadow: 0 0px 2px #aaaaaa;\nz-index: 10;\n"]);return le=function(){return e},e}var fe=function(){var e=Object(r.useState)("none"),n=Object(h.a)(e,2),t=n[0],c=n[1],o=Object(r.useContext)(i.a),u=o.mindmap.state,d=o.history.state,l=o.global.state.title,f=Object(v.a)().expandAll,s=x(),p=s.zoomIn,b=s.zoomOut,g=s.zoomReset,O=E(),w=O.moveXY,y=O.moveReset,k=j(),N=k.undoHistory,S=k.redoHistory,z=function(){var e="data:text/plain,".concat(encodeURIComponent(JSON.stringify(u)));Object(_.c)(e,"".concat(l,".rmf"))},L=function(e){switch(console.log("\u7f29\u653e",e||"\u8fd8\u539f"),e){case"in":p();break;case"out":b();break;default:g()}},P=function(e){switch(console.log("\u79fb\u52a8",e||"\u8fd8\u539f"),e){case"up":w(0,-5);break;case"down":w(0,5);break;case"left":w(-5,0);break;case"right":w(5,0);break;default:y()}};return a.a.createElement("nav",{className:se},a.a.createElement("section",{className:me,onClick:_.e},a.a.createElement(C,{icon:"add-item-alt",onClick:function(){c("new")}},"\u65b0\u5efa"),a.a.createElement(C,{icon:"folder-open",onClick:function(){c("open")}},"\u6253\u5f00"),a.a.createElement(C,{icon:"file-download",onClick:z},"\u4e0b\u8f7d\u81f3\u672c\u5730"),a.a.createElement(C,{icon:"duplicate",onClick:function(){c("export")}},"\u5bfc\u51fa"),a.a.createElement(C,{icon:"palette",onClick:function(){c("theme")}},"\u4e3b\u9898"),a.a.createElement(C,{icon:"plus-circle",onClick:function(){return L("in")}},"\u653e\u5927"),a.a.createElement(C,{icon:"minus-circle",onClick:function(){return L("out")}},"\u7f29\u5c0f"),a.a.createElement(C,{icon:"rotate-left",onClick:function(){return L()}},"\u8fd8\u539f")),a.a.createElement("section",{className:me},a.a.createElement(R,null)),a.a.createElement("section",{className:me,onClick:_.e},a.a.createElement(C,{icon:"rotate-left",onClick:function(){return P()}},"\u8fd8\u539f"),a.a.createElement(C,{icon:"arrow-left",onClick:function(){return P("left")}},"\u5de6"),a.a.createElement(C,{icon:"arrow-up",onClick:function(){return P("up")}},"\u4e0a"),a.a.createElement(C,{icon:"arrow-down",onClick:function(){return P("down")}},"\u4e0b"),a.a.createElement(C,{icon:"arrow-right",onClick:function(){return P("right")}},"\u53f3"),a.a.createElement(C,{icon:"undo",disabled:0===d.undo.length,onClick:function(){N()}},"\u64a4\u9500"),a.a.createElement(C,{icon:"redo",disabled:0===d.redo.length,onClick:function(){S()}},"\u91cd\u505a"),a.a.createElement(C,{icon:"scale",onClick:function(){f(m.h)}},"\u5c55\u5f00\u6240\u6709\u8282\u70b9")),"none"!==t&&a.a.createElement(ae,{type:t,handleClosePopup:function(){c("none")},handleDownload:z}))},se=Object(d.a)(le()),me=Object(d.a)(de()),pe=t(22),be=function(e,n,t){var r=n.addChild,a=n.addSibling,c=n.editNode,o=n.deleteNode,i=n.toggleChildren,u=n.selectNode;return function(n){""===e.cur_edit&&((navigator.platform.toUpperCase().startsWith("MAC")?n.metaKey:n.ctrlKey)&&"Z"===n.key.toUpperCase()&&(n.shiftKey?t.redoHistory():t.undoHistory()));if(""!==e.cur_select)try{!function(n){switch(n.key.toUpperCase()){case"TAB":r(e.cur_select);break;case"ENTER":n.preventDefault(),a(e.cur_select,e.cur_node_info.parent.id);break;case"F2":c(e.cur_select);break;case"BACKSPACE":case"DELETE":o(e.cur_select,e.cur_node_info.parent.id);break;case" ":n.preventDefault(),i(e.cur_select,!e.cur_node_info.showChildren);break;case"ARROWLEFT":n.preventDefault(),e.cur_node_info.parent===m.i?e.cur_node_info.children.length>3&&u(e.cur_node_info.children[Math.trunc(e.cur_node_info.children.length/2)].id):e.cur_node_info.on_left?e.cur_node_info.children.length>0&&u(e.cur_node_info.children[0].id):u(e.cur_node_info.parent.id);break;case"ARROWRIGHT":n.preventDefault(),e.cur_node_info.on_left?u(e.cur_node_info.parent.id):e.cur_node_info.children.length>0&&u(e.cur_node_info.children[0].id);break;case"ARROWUP":n.preventDefault();var t=e.cur_node_info.parent.children.findIndex((function(n){return n.id===e.cur_node_info.id}));t>0&&u(e.cur_node_info.parent.children[t-1].id);break;case"ARROWDOWN":n.preventDefault();var d=e.cur_node_info.parent.children.findIndex((function(n){return n.id===e.cur_node_info.id}));d<e.cur_node_info.parent.children.length-1&&u(e.cur_node_info.parent.children[d+1].id)}}(n)}catch(d){alert("\u5f53\u524d\u7684\u8282\u70b9\u4fe1\u606f\u5b58\u5728\u95ee\u9898\uff0c\u8bf7\u91cd\u65b0\u9009\u62e9\u8282\u70b9")}}},he={startX:0,startY:0},ve=function(e,n,t){var r=e.zoomIn,a=e.zoomOut,c=e.moveXY;return function(e){try{!function(e){if(!0===e.ctrlKey&&e.wheelDelta)return e.preventDefault(),e.stopPropagation(),void(function(e){return e.wheelDelta?e.wheelDelta:40*-e.wheelDelta}(e)>0?r(e.clientX,e.clientY):a(e.clientX,e.clientY));if(1===e.buttons&&"mousedown"===e.type)return he.startX=e.clientX,void(he.startY=e.clientY);if(e.altKey&&1===e.buttons){e.stopPropagation();var n=he.startX,o=he.startY,i=e.clientX-n,u=e.clientY-o;c(i/10/t,u/10),he.startX=e.clientX,he.startY=e.clientY}}(e)}catch(n){alert("\u79fb\u52a8\u6216\u7f29\u653e\u529f\u80fd\u5f02\u5e38",n)}}},ge=t(21),Oe=function(e){return{type:ge.a,data:{isShow:e}}},je=function(){var e=Object(r.useContext)(i.a).editPanel,n=e.state,t=e.dispatch;return{toggelPanelShow:function(e){n.isShow!==e&&t(Oe(e))},savePanel:function(e){t(Oe(e))}}};function xe(){var e=Object(u.a)(["\ndisplay: flex;\nposition: absolute;\nbottom: calc(100% + 5px);\nleft:0;\nbackground-color: #ffffff;\nwidth: max-content;\nheight: 50px;\npadding: 0 8px;\nfont-size: 20px;\nbackground-color: #ffffff;\nborder-radius: 10px;\nbox-shadow: 5px 5px 10px #aaaaaa;\n"]);return xe=function(){return e},e}var Ee=function(e){var n=e.layer,t=e.node,r=e.parent,c=Object(v.a)(),o=je();return a.a.createElement("div",{className:_e,onClick:_.e},a.a.createElement(C,{icon:"git-commit",onClick:function(){c.addChild(t.id)}},"\u6dfb\u52a0\u5b50\u8282\u70b9"),a.a.createElement(C,{icon:"git-fork",onClick:function(){c.addSibling(t.id,r.id)},disabled:n<1},"\u6dfb\u52a0\u5144\u5f1f\u8282\u70b9"),a.a.createElement(C,{icon:"delete",onClick:function(){c.deleteNode(t.id,r.id)},disabled:n<1},"\u5220\u9664"),a.a.createElement(C,{icon:"edit-pencil",onClick:function(){c.editNode(t.id)}},"\u7f16\u8f91"),a.a.createElement(C,{icon:"edit-pencil",onClick:function(){c.selectNode(t.id),o.toggelPanelShow(!0)}},"\u6dfb\u52a0\u5907\u6ce8"),a.a.createElement(C,{icon:"split-v",onClick:function(){c.toggleChildren(t.id,!t.showChildren)},disabled:n<1||0===t.children.length},"\u663e\u9690\u5b50\u8282\u70b9"))},_e=Object(d.a)(xe());function we(){var e=Object(u.a)(["\nposition: absolute;\ntop: 0;\nbottom: 0;\nleft: 0;\nright: 0;\nwidth: fit-content;\nmin-width: 1em;\nmax-width: 10em;\nheight: fit-content;\nmargin: auto;\npadding: 10px;\ncolor: #333333;\nbackground-color: #ffffff;\nbox-shadow: 0 0 20px #aaaaaa;\nborder-radius: 5px;\noutline: none;\nz-index: 3;\nuser-select: text;\n"]);return we=function(){return e},e}var ye=function(e){var n=e.node_id,t=e.children,c=Object(r.useRef)(),o=Object(v.a)(),i=o.changeText,u=o.selectNode;return Object(r.useEffect)((function(){c.current.focus(),document.getSelection().selectAllChildren(c.current)}),[]),a.a.createElement("div",{className:ke,ref:c,contentEditable:"true",suppressContentEditableWarning:"true",onClick:_.e,onKeyDown:function(e){switch(e.key.toUpperCase()){case"ESCAPE":c.current.textContent=t;case"ENTER":c.current.blur()}},onBlur:function(){i(n,c.current.textContent),u(n)}},t)},ke=Object(d.a)(we()),Ce=t(23),Ne=t.n(Ce),Se=(t(44),t(24)),ze=t.n(Se);t(231);Ne.a.setOptions({renderer:new Ne.a.Renderer,highlight:function(e){return ze.a.highlightAuto(e).value},pedantic:!1,gfm:!1,breaks:!1,sanitize:!1,smartLists:!0,smartypants:!1,xhtml:!1});var Re=function(e){var n=e.mdtext,t=void 0===n?"":n;return Object(r.useEffect)((function(){document.querySelectorAll("pre code").forEach((function(e){ze.a.highlightBlock(e)}))}),[t]),a.a.createElement("div",{className:"MdPreview"},a.a.createElement("i",{className:"zwicon-note",style:{fontSize:20}}),a.a.createElement("div",{className:"MdPreview-Content",dangerouslySetInnerHTML:{__html:Ne()(t)}}))};function Le(){var e=Object(u.a)(["\nright: -15px;\n"]);return Le=function(){return e},e}function Pe(){var e=Object(u.a)(["\nleft: -15px;\n"]);return Pe=function(){return e},e}function De(){var e=Object(u.a)(["\nposition: absolute;\ntop:0;\nbottom: 0;\nwidth: 20px;\nheight: 20px;\nmargin: auto 0;\npadding: 0;\ntext-align: center;\nbackground-color: #ffffff;\nborder: 1px solid #cccccc;\nborder-radius: 50%;\noutline: none;\n"]);return De=function(){return e},e}function Te(){var e=Object(u.a)(["\nposition: absolute;\ntop:0;\nbottom:0;\nleft:0;\nright:0;\n"]);return Te=function(){return e},e}function Ie(){var e=Object(u.a)(["\nz-index: 1; /* \u63d0\u9ad8 Node \u9ad8\u5ea6\uff0c\u9632\u6b62\u88ab\u906e\u6321 */\n","\n"]);return Ie=function(){return e},e}function Me(){var e=Object(u.a)(["\ndiv& {\npadding: 0 15px;\nborder: none;\np {\nfont-size: 90%;\n}\n}\n    "]);return Me=function(){return e},e}function Ae(){var e=Object(u.a)(["\ndiv& {\npadding: 10px 15px;\n}\n    "]);return Ae=function(){return e},e}function We(){var e=Object(u.a)(["\ndiv& {\nbackground-color: var(",");\n}\n    "]);return We=function(){return e},e}function He(){var e=Object(u.a)(["\ndiv& {\npadding: 15px 20px;\ncolor: #ffffff;\nfont-size: 120%;\nfont-weight: 700;\nbackground-color: var(",");\nborder:2px solid var(",");\n}\n    "]);return He=function(){return e},e}function Xe(){var e=Object(u.a)(["\nposition: relative;\nmin-width: 10px;\nmax-width: 200px;\nmargin: 20px 40px;\npadding: 15px;\nbackground-color: #ffffff;\nborder: 1px solid var(",");\nborder-radius: 15px;\ncursor: pointer;\n\np {\nmin-height: 18px; /* \u5f53 p \u4e2d\u6ca1\u6709\u5185\u5bb9\u65f6\u6491\u8d77\u5143\u7d20 */\nmargin: 0;\nline-height: 1.5em;\noverflow-wrap: break-word;\n}\n\n&:hover {\n","\n}\n\n&.ondrag {\nbackground-color: var(",");\np {\ncolor: #ffffff;\n}\n}\n"]);return Xe=function(){return e},e}var Be=function(e){var n=e.layer,t=e.node,c=e.parent,o=e.node_refs,u=e.on_left,l=Object(r.useRef)(),f=Object(r.useContext)(i.a),s=f.nodeStatus,p=s.state,b=s.dispatch,h=f.editPanel.state,g=Object(v.a)();return Object(r.useEffect)((function(){return o.add(l),function(){o.delete(l)}}),[]),Object(r.useEffect)((function(){p.cur_select===t.id&&(l.current.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),b(Object(O.b)(t,c,u)))}),[p.cur_select,t]),a.a.createElement("div",{className:Object(d.b)(Ke,qe[n<3?n:3],Object(w.a)({},Je,p.cur_select===t.id)),draggable:n>0&&p.cur_edit!==t.id,"data-tag":u?m.c:m.g,"data-parent":c.id,"data-show-children":t.showChildren,id:t.id,ref:l,onClick:_.e},p.cur_edit===t.id&&a.a.createElement(ye,{node_id:t.id},t.text),a.a.createElement("div",{className:Ue,"data-tag":m.b,onClick:function(){g.selectNode(t.id,!0)},onDoubleClick:function(){g.editNode(t.id)}}),a.a.createElement("p",null,t.text," ",t.info&&a.a.createElement(Re,{mdtext:t.info})),n>0&&t.children.length>0&&a.a.createElement("button",{className:Object(d.b)(Fe,u?Ve:Ze),onClick:function(){g.toggleChildren(t.id,!t.showChildren),g.clearNodeStatus()}},t.showChildren?"-":"+"),p.cur_select===t.id&&p.select_by_click&&!h.isShow&&a.a.createElement(Ee,{layer:n,node:t,parent:c}))},Ye="\nbox-shadow: 0 0 0 3px #ffffff, 0 0 0 6px var(".concat(m.l,"); /* \u53cc\u5c42\u9634\u5f71\u5b9e\u73b0\u9009\u4e2d\u6846 */\n"),Ke=Object(d.a)(Xe(),m.n,Ye,m.l),qe=[Object(d.a)(He(),m.k,m.l),Object(d.a)(We(),m.m),Object(d.a)(Ae()),Object(d.a)(Me())],Je=Object(d.a)(Ie(),Ye),Ue=Object(d.a)(Te()),Fe=Object(d.a)(De()),Ve=Object(d.a)(Pe()),Ze=Object(d.a)(Le());function Ge(){var e=Object(u.a)(["\nflex-direction: row-reverse;\n"]);return Ge=function(){return e},e}function $e(){var e=Object(u.a)(["\ndisplay: flex;\nalign-items: center;\n"]);return $e=function(){return e},e}var Qe=function e(n){var t=n.layer,r=n.node,c=n.node_refs,o=n.parent,i=n.on_left;return a.a.createElement("div",{className:Object(d.b)(en,Object(w.a)({},nn,i))},a.a.createElement(Be,{layer:t,node:r,node_refs:c,parent:o,on_left:i}),a.a.createElement("div",null,r.showChildren&&r.children.map((function(n){return a.a.createElement(e,{key:n.id,layer:t+1,node:n,node_refs:c,parent:r,on_left:i})}))))},en=Object(d.a)($e()),nn=Object(d.a)(Ge());function tn(){var e=Object(u.a)(["\ndisplay: flex;\nalign-items: center;\nwidth: max-content; /* max-content \u624d\u80fd\u4fdd\u8bc1\u6b63\u786e\u8bfb\u53d6\u5e03\u5c40 */\n"]);return tn=function(){return e},e}var rn=function(e){var n=e.layer,t=e.node,c=e.node_refs,o=Object(r.useRef)(),i=t.children.length,u=i>3?Math.trunc(i/2):i;return Object(r.useEffect)((function(){o.current.scrollIntoView({block:"center",inline:"center"})}),[]),a.a.createElement("div",{className:an},a.a.createElement("div",null,t.showChildren&&t.children.slice(u).map((function(e){return a.a.createElement(Qe,{key:e.id,layer:n+1,node:e,node_refs:c,parent:t,on_left:!0})}))),a.a.createElement("div",{ref:o},a.a.createElement(Be,{layer:0,node:t,node_refs:c,parent:m.i})),a.a.createElement("div",null,t.showChildren&&t.children.slice(0,u).map((function(e){return a.a.createElement(Qe,{key:e.id,layer:n+1,node:e,node_refs:c,parent:t,on_left:!1})}))))},an=Object(d.a)(tn()),cn=t(25),on=function(e,n,t,r,a){e.moveTo(n,t),e.bezierCurveTo(n,a,.9*r+.1*n,a,r,a)},un=function(e,n,t,r){e.beginPath(),e.lineWidth="2",e.strokeStyle=n.main,function e(n,t,r){var a=t.id,c=t.children;if(c.length>0){var o=r.get(a),i=Object(h.a)(o,3),u=i[0],d=i[1],l=i[2];c.forEach((function(t){var a=r.get(t.id);if(a){var c=Object(h.a)(a,4),o=c[0],i=c[1],f=c[2];c[3]===m.c?on(n,u,l,i,f):on(n,d,l,o,f),e(n,t,r)}}))}}(e,t,r),e.stroke(),e.closePath()},dn=function(e,n,t,r,a,c){e.beginPath(),e.strokeStyle=n.main,e.lineWidth="2",e.setLineDash([5,5]);var o,i,u=(r.top+r.bottom)/2,d=(a.top+a.bottom)/2;c?(o=r.left,i=a.right,e.strokeRect(i-50,d-10,50,20)):(o=r.right,i=a.left,e.strokeRect(i,d-10,50,20)),on(e,o,u,i,d),e.stroke(),e.closePath()},ln=function(e){var n=e.offsetLeft,t=n+e.offsetWidth,r=e.offsetTop;return{left:n,right:t,top:r,bottom:r+e.offsetHeight}},fn=function(e,n,t,r,a,c,o){var i,u,d,l,f,s,p,b,h,v,g,O,j,x,E,w=a.moveNode,y=function(e){g=t.scrollLeft,O=t.scrollTop-56};return[{type:"dragstart",listener:function(n){if(i="",u="",d="",l=!1,f=[],s=[],p=[],b=[],h=void 0,v=!1,g=t.scrollLeft,O=t.scrollTop-56,j=t.offsetWidth,x=t.offsetHeight,E=!1,t.addEventListener("scroll",y),n.target&&(n.target.dataset.tag===m.c||n.target.dataset.tag===m.g)){i=n.target.id,u=n.target.dataset.parent;var r=Object(_.d)(e,u);v=r===e,h=ln(document.getElementById(u)),f[0]=r.children.map((function(e){return e.id}));var a=[];if(a[0]=f[0].map((function(e){return ln(document.getElementById(e))})),v&&e.children.length>3){var c=Math.trunc(e.children.length/2);f=[f[0].slice(0,c),f[0].slice(c)],a=[a[0].slice(0,c),a[0].slice(c)]}s=a.map((function(e){return Math.min.apply(Math,Object(cn.a)(e.map((function(e){return e.left}))))})),p=a.map((function(e){return Math.max.apply(Math,Object(cn.a)(e.map((function(e){return e.right}))))})),b=a.map((function(e){return e.map((function(e){return[e.top,e.bottom]})).reduce((function(e,n){return e.concat(n)}),[])}))}}},{type:"drag",listener:function(e){var t=n.getContext("2d");t.clearRect(0,0,n.width,n.height);for(var a=f.length,u=-j*o.x/100,_=-x*o.y/100,w=(e.x+g)/c+u,y=(e.y+O)/c+_,k=0;k<a;k++)if(!E&&w>s[k]&&w<p[k]){var C={left:s[k],right:p[k]},N=1===k||!v&&document.getElementById(i).dataset.tag===m.c,S=b[k].length-1;if(y>b[k][0]-200&&y<b[k][0])return C.top=b[k][0]-50,C.bottom=b[k][0],dn(t,r,0,h,C,N),d=f[k][0],void(l=!0);for(var z=2;z<S+1;z+=2)if(y>b[k][z-1]&&y<b[k][z])return C.top=b[k][z-1],C.bottom=b[k][z],dn(t,r,0,h,C,N),d=f[k][z/2],void(l=!0);if(y>b[k][S]&&y<b[k][S]+200)return C.top=b[k][S],C.bottom=b[k][S]+50,dn(t,r,0,h,C,N),d=f[k+1]&&f[k+1][0],void(l=!0)}}},{type:"dragover",listener:function(e){e.preventDefault()}},{type:"dragenter",listener:function(e){e.target&&e.target.dataset.tag===m.b&&(e.target.parentNode.classList.add("ondrag"),d=e.target.parentNode.id,l=!1,E=!0)}},{type:"dragleave",listener:function(e){e.target&&e.target.dataset.tag===m.b&&(e.target.parentNode.classList.remove("ondrag"),d="",l=!1,E=!1)}},{type:"drop",listener:function(e){e.target.parentNode.classList.remove("ondrag"),""!==d&&d!==i&&d!==u&&w(i,d,u,l)}},{type:"dragend",listener:function(){n.getContext("2d").clearRect(0,0,n.width,n.height),t.removeEventListener("scroll",y)}}]};function sn(){var e=Object(u.a)(["\nposition: absolute;\ntop:0;\nleft:0;\nz-index: -1;\n"]);return sn=function(){return e},e}var mn=function(e){var n=e.parent_ref,t=e.container_ref,c=e.mindmap,o=Object(r.useRef)(),u=Object(r.useState)(0),d=Object(h.a)(u,2),l=d[0],f=d[1],p=s().theme,b=Object(v.a)(),g=Object(r.useContext)(i.a).global.state,O=g.zoom,j=g.x,x=g.y,E=function(){f(Date.now())};return Object(r.useEffect)((function(){return window.addEventListener("resize",E),function(){window.removeEventListener("resize",E)}}),[]),Object(r.useEffect)((function(){var e=fn(c,o.current,t.current,p,b,O,{x:j,y:x});return e.forEach((function(e){return document.querySelector("#".concat(m.d)).addEventListener(e.type,e.listener)})),function(){e.forEach((function(e){return document.querySelector("#".concat(m.d)).removeEventListener(e.type,e.listener)}))}}),[c,p,O,j,x]),Object(r.useEffect)((function(){var e=o.current;e.width=n.current.offsetWidth,e.height=n.current.offsetHeight}),[c,l,g.zoom]),a.a.createElement("canvas",{ref:o,className:pn})},pn=Object(d.a)(sn());function bn(){var e=Object(u.a)(["\nposition: absolute;\ntop:0;\nleft:0;\nz-index: -2;\n"]);return bn=function(){return e},e}var hn=function(e){var n=e.parent_ref,t=e.mindmap,c=e.node_refs,o=Object(r.useRef)(),u=Object(r.useState)(0),d=Object(h.a)(u,2),l=d[0],f=d[1],m=s().theme,p=Object(r.useContext)(i.a).global.state,b=function(e){f(Date.now())};return Object(r.useEffect)((function(){return window.addEventListener("resize",b),function(){window.removeEventListener("resize",b)}}),[]),Object(r.useEffect)((function(){var e=o.current;e.width=n.current.offsetWidth,e.height=n.current.offsetHeight;var r=new Map(Array.from(c).map((function(e){return[e.current.id,[e.current.offsetLeft,e.current.offsetLeft+e.current.offsetWidth,e.current.offsetTop+.5*e.current.offsetHeight,e.current.dataset.tag]]}))),a=e.getContext("2d");un(a,m,t,r)}),[t,m,l,p.zoom]),a.a.createElement("canvas",{ref:o,className:vn})},vn=Object(d.a)(bn());function gn(){var e=Object(u.a)(["\nposition: relative;\nwidth: fit-content;\npadding: 30vh 30vw;\n"]);return gn=function(){return e},e}var On=new Set,jn=function(e){var n=e.container_ref,t=Object(r.useRef)(),c=Object(r.useContext)(i.a),o=c.mindmap.state,u=c.nodeStatus.state,d=c.history.dispatch,l=c.global.state,f=j(),s=Object(v.a)(),p=x(),b=E(),g=s.clearNodeStatus,O=Object(r.useState)(0),w=Object(h.a)(O,2),y=w[0],k=w[1],C=Object(r.useMemo)((function(){return JSON.stringify(o)}),[o]),N=function(){k(Date.now())};return Object(r.useEffect)((function(){var e=be(u,s,f);return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[u]),Object(r.useEffect)((function(){return window.addEventListener("click",g),function(){window.removeEventListener("click",g)}}),[]),Object(r.useEffect)((function(){return window.addEventListener("resize",N),function(){window.removeEventListener("resize",N)}}),[]),Object(r.useEffect)((function(){var e=n.current.clientWidth/n.current.clientHeight,t=ve(p,l.zoom),r=ve(b,l.zoom,e);return document.querySelector("#".concat(m.e)).addEventListener("wheel",t),document.querySelector("#".concat(m.e)).addEventListener("mousemove",Object(_.a)(r,4)),document.querySelector("#".concat(m.e)).addEventListener("mousedown",r),function(){document.querySelector("#".concat(m.e)).removeEventListener("wheel",t),document.querySelector("#".concat(m.e)).addEventListener("mousemove",Object(_.a)(r,4)),document.querySelector("#".concat(m.e)).addEventListener("mousedown",r)}}),[y]),Object(r.useEffect)((function(){localStorage.setItem("mindmap",C),d(Object(pe.b)(C,u.cur_select||u.cur_edit))}),[C]),a.a.createElement("div",{className:xn,ref:t,style:{zoom:l.zoom,left:l.x+"vw",top:l.y+"vh"},id:m.d,draggable:!1},a.a.createElement(rn,{key:o.id,layer:0,node:o,node_refs:On}),a.a.createElement(mn,{parent_ref:t,container_ref:n,mindmap:o}),a.a.createElement(hn,{parent_ref:t,mindmap:o,node_refs:On}))},xn=Object(d.a)(gn());var En=function(e){var n=e.propText,t=Object(r.useState)(n),c=Object(h.a)(t,2),o=c[0],i=c[1];return Object(r.useEffect)((function(){i(n)}),[n]),a.a.createElement("div",{className:e.className||""},a.a.createElement("textarea",{style:_n,onChange:function(e){i(e.target.value)},onBlur:function(){console.log("\u5907\u6ce8\uff1a",o),e.onBlur&&e.onBlur(o)},value:o}))},_n={width:"100%",height:"100%",resize:"none"};function wn(){var e=Object(u.a)(["\n    margin-top:20px;\n    width:295px;\n    height:460px;\n"]);return wn=function(){return e},e}function yn(){var e=Object(u.a)(["\nheight: 500px;\nwidth: 300px;\ntop: 20px;\nright: 40px;\nmargin: 56px 0 0;\noverflow: auto;\nposition: fixed;\n//z-index: 10;\nborder: 2px solid #eeee;\nborder-radius: 10px;\nbackground: #fff;\nbackground:rgba(255,255,255,1);\nbox-shadow:0px 2px 12px 0px rgba(0,0,0,0.16);\npadding:20px 10px;\n"]);return yn=function(){return e},e}var kn=function(){var e=Object(r.useContext)(i.a),n=e.editPanel.state,t=e.nodeStatus.state.cur_node_info,c=t.info,o=void 0===c?"":c,u=t.text,d=t.id,l=Object(v.a)(),f=je();return n.isShow?a.a.createElement("div",{className:Cn,onClick:function(e){return e.stopPropagation()},onKeyDown:function(e){return e.stopPropagation()}},"\u5f53\u524d\u7f16\u8f91\u8282\u70b9\uff1a",u||"\u65e0",a.a.createElement("i",{className:"zwicon-close",style:Nn,onClick:function(){return f.toggelPanelShow(!1)}}),a.a.createElement(En,{className:Sn,propText:o,onBlur:function(e){return d&&l.editNodeInfo(d,e)}})):null},Cn=Object(d.a)(yn()),Nn={fontSize:20,position:"absolute",cursor:"pointer",right:"10px",top:"5px"},Sn=Object(d.a)(wn());function zn(){var e=Object(u.a)(["\nheight: calc(100vh - 56px);\nmargin: 56px 0 0;\noverflow: hidden;\n"]);return zn=function(){return e},e}var Rn=function(){var e=Object(r.useRef)();return a.a.createElement("main",{ref:e,className:Ln,id:m.e},a.a.createElement(jn,{container_ref:e}),a.a.createElement(kn,null))},Ln=Object(d.a)(zn()),Pn=function(){return a.a.createElement(i.b,null,a.a.createElement(b,null,a.a.createElement(fe,null),a.a.createElement(Rn,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(Pn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},30:function(e,n,t){e.exports=t(232)},35:function(e,n,t){},4:function(e,n,t){"use strict";t.d(n,"e",(function(){return a})),t.d(n,"b",(function(){return c})),t.d(n,"d",(function(){return o})),t.d(n,"f",(function(){return i})),t.d(n,"c",(function(){return u})),t.d(n,"a",(function(){return d}));var r=t(6),a=function(e){e.stopPropagation()},c=function e(n){if(n instanceof Object){if(Array.isArray(n))return n.map(e);var t={};return Object.entries(n).forEach((function(n){var a=Object(r.a)(n,2),c=a[0],o=a[1];t[c]=e(o)})),t}return n},o=function e(n,t){return n.id===t?n:n.children.map((function(n){return e(n,t)})).find((function(e){return e}))},i=function e(n){n.showChildren=!0,n.children.forEach(e)},u=function(e,n){var t=document.createElement("a");t.href=e,t.download=n,t.click()},d=function(e,n){var t=null;return function(){var r=arguments,a=this;t&&clearTimeout(t),t=setTimeout((function(){e.apply(a,r)}),n)}}},43:function(e,n,t){},44:function(e,n,t){},5:function(e,n,t){"use strict";t.d(n,"a",(function(){return y}));var r=t(6),a=t(0),c=t.n(a),o=t(7),i=t(20),u=t(4),d=JSON.parse(localStorage.getItem("mindmap"))||i.a,l=function(e,n){switch(n.type){case o.h:var t=Object(u.b)(e),r=Object(u.d)(t,n.data.node_id);return r.children.length>0&&r!==t&&Object.assign(r,n.data.node),t;case o.a:var a=Object(u.b)(e);return Object(u.d)(a,n.data.node_id).children.push(n.data.node),a;case o.b:var c=Object(u.b)(e);if(n.data.parent_id){var i=Object(u.d)(c,n.data.parent_id),d=i.children.findIndex((function(e){return e.id===n.data.node_id}))+1;i.children.splice(d,0,n.data.node)}return c;case o.f:var l=Object(u.b)(e),f=Object(u.d)(l,n.data.parent_id),s=f.children.findIndex((function(e){return e.id===n.data.node_id})),m=f.children[s];if(f.children.splice(s,1),n.data.is_sibling){var p=f.children.findIndex((function(e){return e.id===n.data.target_id}))+1||f.children.length+1;f.children.splice(p-1,0,m)}else{Object(u.d)(l,n.data.target_id).children.push(m)}return l;case o.c:var b=Object(u.b)(e),h=Object(u.d)(b,n.data.node_id);return Object.assign(h,n.data.node),b;case o.d:var v=Object(u.b)(e);if(n.data.parent_id){var g=Object(u.d)(v,n.data.parent_id),O=g.children.findIndex((function(e){return e.id===n.data.node_id}));g.children.splice(O,1)}return v;case o.e:var j=Object(u.b)(e),x=Object(u.d)(j,n.data.node_id);return Object(u.f)(x),j;case o.g:return n.data.mindmap;default:return e}},f=t(15),s=t(14),m={cur_select:"",select_by_click:!1,cur_edit:"",cur_node_info:{}},p=function(e,n){switch(n.type){case s.d:return e.cur_select===n.data.cur_select&&delete n.data.cur_node_info,Object(f.a)(Object(f.a)({},e),n.data);case s.c:case s.a:case s.b:return Object(f.a)(Object(f.a)({},e),n.data);default:return e}},b=t(16),h={undo:[],redo:[],last_snapshot:null},v=function(e,n){switch(n.type){case b.b:var t=Object(u.b)(e);return t.last_snapshot&&(t.undo.length>0&&t.undo[t.undo.length-1].mindmap===n.data.mindmap?(t.redo.unshift(t.last_snapshot),t.undo.pop()):t.redo.length>0&&t.redo[0].mindmap===n.data.mindmap?(t.undo.push(t.last_snapshot),t.redo.shift()):(t.undo.push(t.last_snapshot),t.redo=[])),t.last_snapshot=n.data,t;case b.a:return h;default:return e}},g=t(9),O=t(1),j=(t(37),{title:localStorage.getItem("title")||O.a,theme_index:Number(localStorage.getItem("theme_index"))||0,theme_list:[{main:"#eda938",light:"#f4cc87",dark:"#e79021",ex:"#ce7529",assist:"#1980da"},{main:"#ff4c26",light:"#ffcabc",dark:"#e83f1d",ex:"#c12a0f",assist:"#0e95ac"},{main:"#50b843",light:"#c3e5bd",dark:"#28ab17",ex:"#038b00",assist:"#790595"},{main:"#2d99d7",light:"#e2f5ff",dark:"#2786c3",ex:"#2375af",assist:"#ca6c27"},{main:"#b347d2",light:"#e4c0ef",dark:"#a623c9",ex:"#9621c3",assist:"#009000"},{main:"#555555",light:"#e9e9e9",dark:"#434343",ex:"#262626",assist:"#860314"}],zoom:1,x:0,y:0}),x=function(e,n){switch(n.type){case g.e:case g.d:return Object.assign(Object(u.b)(e),n.data);case g.f:var t=Object(u.b)(e);return t.zoom+=.1,t;case g.g:var r=Object(u.b)(e);return r.zoom-=.1,f=.3,(d=r)[l="zoom"]<=f&&(d[l]=f),r;case g.h:var a=Object(u.b)(e);return a.zoom=1,a;case g.b:var c=Object(u.b)(e);return c.x+=n.data.x/c.zoom,c.y+=n.data.y/c.zoom,c;case g.a:var o=Object(u.b)(e);return o.x=0,o.y=0,o;case g.c:var i=Object(u.b)(e);return i.x=0,i.x=0,i;default:return e}var d,l,f},E=t(21),_={isShow:!1,nodeId:""},w=function(e,n){switch(n.type){case E.a:var t=Object(u.b)(e);return t.isShow=n.data.isShow,t;default:return e}},y=c.a.createContext({});n.b=function(e){var n=Object(a.useReducer)(l,d),t=Object(r.a)(n,2),o=t[0],i=t[1],u=Object(a.useReducer)(p,m),f=Object(r.a)(u,2),s=f[0],b=f[1],g=Object(a.useReducer)(v,h),O=Object(r.a)(g,2),E=O[0],k=O[1],C=Object(a.useReducer)(x,j),N=Object(r.a)(C,2),S=N[0],z=N[1],R=Object(a.useReducer)(w,_),L=Object(r.a)(R,2),P={mindmap:{state:o,dispatch:i},nodeStatus:{state:s,dispatch:b},history:{state:E,dispatch:k},global:{state:S,dispatch:z},editPanel:{state:L[0],dispatch:L[1]}};return c.a.createElement(y.Provider,{value:P},e.children)}},7:function(e,n,t){"use strict";t.d(n,"h",(function(){return r})),t.d(n,"a",(function(){return a})),t.d(n,"b",(function(){return c})),t.d(n,"f",(function(){return o})),t.d(n,"c",(function(){return i})),t.d(n,"d",(function(){return u})),t.d(n,"e",(function(){return d})),t.d(n,"g",(function(){return l}));var r="mindmap/toggleChildren",a="mindmap/addChild",c="mindmap/addSibling",o="mindmap/moveNode",i="mindmap/changeText",u="mindmap/deleteNode",d="mindmap/expandAll",l="mindmap/setMindmap"},8:function(e,n,t){"use strict";var r=t(0),a=t(5),c=t(12),o=t(11),i=t(22),u=t(18),d=t.n(u);n.a=function(){var e=Object(r.useContext)(a.a),n=e.mindmap.dispatch,t=e.nodeStatus.dispatch,u=e.history.dispatch;return{toggleChildren:function(e,t){n(c.i(e,t))},addChild:function(e){var r=d()(""+Date.now()+Math.random());n(c.i(e,!0)),n(c.a(e,r)),t(o.c(r))},addSibling:function(e,r){var a=d()(""+Date.now()+Math.random());n(c.b(e,r,a)),t(o.c(a))},moveNode:function(e,r,a,i){n(c.g(e,r,a,i)),t(o.d(e))},editNode:function(e){t(o.c(e))},changeText:function(e,t){n(c.d(e,t))},editNodeInfo:function(e,t){n(c.c(e,t))},selectNode:function(e,n){t(o.d(e,n))},deleteNode:function(e,r){n(c.e(e,r)),t(o.d(r))},clearNodeStatus:function(){t(o.a())},setMindmap:function(e,r){r&&(u(Object(i.a)()),t(o.d(e.id))),n(c.h(e))},expandAll:function(e){n(c.f(e)),t(o.d(e))}}}},9:function(e,n,t){"use strict";t.d(n,"e",(function(){return r})),t.d(n,"d",(function(){return a})),t.d(n,"f",(function(){return c})),t.d(n,"g",(function(){return o})),t.d(n,"h",(function(){return i})),t.d(n,"b",(function(){return u})),t.d(n,"a",(function(){return d})),t.d(n,"c",(function(){return l}));var r="global/setTitle",a="global/setTheme",c="global/zoomIn",o="global/zoomOut",i="global/zoomReset",u="global/moveXY",d="global/moveReset",l="global/moveXYWhenZoom"}},[[30,1,2]]]);
//# sourceMappingURL=main.a2694df0.chunk.js.map